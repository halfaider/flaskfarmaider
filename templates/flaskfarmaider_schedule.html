{% extends 'flaskfarmaider.html' %}
{% block content %}
{{ macros.m_modal_start('sch-add-modal', '일정 추가', 'modal-lg') }}
<form id='sch-setting'></form>
{{ macros.m_modal_end_with_button(
  [
    ['sch-save-btn', '일정 저장'],
  ]
) }}
<form id="form_search">
    <div class="input-group mb-3">
        <div class="input-group-prepend w-25">
            <select id="order" name="order" class="form-control">
                <option value="desc">최근순</option>
                <option value="asc">오래된순</option>
            </select>
            <select id="option1" name="option1" class="form-control">
                <option value="all">전체</option>
                {% for task in TASK_KEYS %}
                <option value="{{ task }}">{{ TASKS[task]['name'] }}</option>
                {% endfor %}
            </select>
        </div>
        <input id="keyword" name="keyword" class="form-control" type="text" placeholder="검색..." aria-label="Search">
        <div class="input-group-append">
            <div class="btn-group" role="group">
                <button type="button" id="globalSearchSearchBtn" class="btn btn-outline-primary">검색</button>
                <button type="button" id="globalSearchResetBtn" class="btn btn-outline-primary">리셋</button>
            </div>
        </div>
    </div>
</form>
<div class="text-right" role="group">
    <button type="button" id="sch-add-btn" class="btn btn-lg btn-block btn-primary">일정 추가</button>
</div>
<hr class="border border-secondary">

<table id="sch-list-table" class="table table-hover table-sm table-striped align-bottom table-responsive-sm">
    <thead>
        <tr class="text-primary">
            <th scope="col" class="w-auto text-center">ID</th>
            <th scope="col" class="w-auto text-center">작업</th>
            <th scope="col" class="w-auto text-center">주기</th>
            <th scope="col" class="w-auto">내용</th>
            <th scope="col" class="w-auto text-center">활성화</th>
            <th scope="col" class="w-auto text-center">상태</th>
            <th scope="col" class="w-auto text-center">최근 실행</th>
            <th scope="col" class="w-auto text-center">메뉴</th>
        </tr>
    </thead>
    <tbody class="table-group-divider align-middle accordion" id="sch-accordion">
    </tbody>
    <tfoot>
    </tfoot>
</table>

<div id="page1"></div>
<div id="page2" disalbed class="d-none"></div>

<hr class="border border-secondary">
<!-- browser -->
<div class="input-group mb-3">
    <input id="working-directory" placeholder="/home" type="text" value="{{ args[module_name ~ '_working_directory'] }}" class="form-control" />
    <div class="input-group-append">
        <button id="working-directory-submit" type="button" class="btn btn-outline-primary">이동</button>
    </div>
</div>
</br>

<table id="brw-list-table" class="table table-hover table-striped align-bottom">
    <thead>
        <tr class="text-primary">
            <th scope="col" class="w-75 pl-3">이름</th>
            <th scope="col" class="w-auto text-right">크기</th>
            <th scope="col" class="w-auto text-center pr-3">수정한 날짜</th>
        </tr>
    </thead>
    <thead class="dir-parent"></thead>
    <tbody class="table-group-divider align-middle"></tbody>
    <tfoot></tfoot>
</table>

<script type="text/javascript">
    $(function() {
        // elements
        set_elements();
        // 초기 일정 불러오기
        // f'{order}|{page}|{search}|{option1}|{option2}')
        if (LAST_LIST_OPTIONS.length == 5) {
            E_GLOBAL_SEARCH_ORDER.prop('value', LAST_LIST_OPTIONS[0]);
            E_GLOBAL_SEARCH_KEYWORD.prop('value', LAST_LIST_OPTIONS[2]);
            E_GLOBAL_SEARCH_OPTION1.prop('value', LAST_LIST_OPTIONS[3]);
            E_GLOBAL_SEARCH_OPTION2.prop('value', LAST_LIST_OPTIONS[4]);
            globalRequestSearch(LAST_LIST_OPTIONS[1]);
        } else {
            globalRequestSearch('1');
        }
        // 초기 디렉토리 불러오기
        browser_command({
            command: 'list',
            path: E_BROWSER_WD.prop('value'),
            recursive: false,
            scan_mode: SCAN_MODE_KEYS[0],
        });
    });
</script>

{% endblock %}